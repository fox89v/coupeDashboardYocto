MACHINE ?= "qemuarm64"
PACKAGE_CLASSES = "package_ipk"

# ğŸ§  usa tutti i core disponibili per la build
BB_NUMBER_THREADS ?= "${@oe.utils.cpu_count()}"
PARALLEL_MAKE ?= "-j${@oe.utils.cpu_count()}"

# ğŸ§© libc leggera
TCLIBC = "musl"

# ğŸ§± features minime ma con EGLFS
DISTRO_FEATURES = "opengl egl kms"
DISTRO_FEATURES:remove = "x11 wayland nfs bluetooth wifi systemd-boot"

# ğŸ’¨ niente splash, niente package-management
IMAGE_FEATURES = ""
IMAGE_FEATURES:remove = "splash package-management debug-tweaks"

# âš™ï¸ console silenziosa e boot rapido
APPEND += "quiet loglevel=0 vt.global_cursor_default=0"
SERIAL_CONSOLE = "115200;ttyAMA0"
QUIET_CONSOLE = "1"

# ğŸ§¹ disabilita logging persistente e roba inutile
VOLATILE_LOG_DIR = "yes"

# ğŸ§° cache condivisa
SSTATE_DIR ?= "${TOPDIR}/../sstate-cache"
DL_DIR ?= "${TOPDIR}/../downloads"

# ğŸ”§ pulizia post-build
INHERIT += "rm_work"

# âš ï¸ accetta licenze proprietarie (firmware RPi)
LICENSE_FLAGS_ACCEPTED += "synaptics-killswitch"

# ğŸ§© QEMU SDL (solo per test grafici)
PACKAGECONFIG:append_pn-qemu-native = " sdl"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ§  Qt base (solo core + EGLFS)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DISTRO_FEATURES:append = " opengl egl"
DISTRO_FEATURES:remove = " x11 wayland"
PACKAGECONFIG:append_pn-qtbase = " gles2 eglfs"

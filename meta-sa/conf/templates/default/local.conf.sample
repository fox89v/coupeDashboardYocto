MACHINE ?= "qemuarm64"
PACKAGE_CLASSES = "package_ipk"

# üß† usa tutti i core disponibili per la build
BB_NUMBER_THREADS ?= "${@oe.utils.cpu_count()}"
PARALLEL_MAKE ?= "-j${@oe.utils.cpu_count()}"

# üß© libc leggera
TCLIBC = "musl"

# üß± features minime ma con EGLFS
DISTRO_FEATURES = "opengl egl kms"
DISTRO_FEATURES:remove = "x11 wayland nfs bluetooth wifi systemd-boot"

# üí® niente splash, niente package-management
IMAGE_FEATURES = ""
IMAGE_FEATURES:remove = "splash package-management debug-tweaks"

# ‚öôÔ∏è console silenziosa e boot rapido
APPEND += "quiet loglevel=0 vt.global_cursor_default=0"
SERIAL_CONSOLE = "115200;ttyAMA0"
QUIET_CONSOLE = "1"

# üßπ disabilita logging persistente e roba inutile
VOLATILE_LOG_DIR = "yes"

# üß∞ cache condivisa
SSTATE_DIR ?= "${TOPDIR}/../sstate-cache"
DL_DIR ?= "${TOPDIR}/../downloads"

# üîß pulizia post-build
INHERIT += "rm_work"

# ‚ö†Ô∏è accetta licenze proprietarie (firmware RPi)
LICENSE_FLAGS_ACCEPTED += "synaptics-killswitch"

# üß© QEMU SDL (solo per test grafici)
PACKAGECONFIG:append_pn-qemu-native = " sdl"
